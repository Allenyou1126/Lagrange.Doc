import{_ as s,o as t,c as a,R as o}from"./chunks/framework.n93kXFqc.js";const g=JSON.parse('{"title":"拓展API","description":"","frontmatter":{},"headers":[],"relativePath":"Lagrange.OneBot/API/Extend/index.md","filePath":"Lagrange.OneBot/API/Extend/index.md"}'),n={name:"Lagrange.OneBot/API/Extend/index.md"},e=o(`<h1 id="拓展api" tabindex="-1">拓展API <a class="header-anchor" href="#拓展api" aria-label="Permalink to &quot;拓展API&quot;">​</a></h1><h2 id="获取收藏表情" tabindex="-1">获取收藏表情 <a class="header-anchor" href="#获取收藏表情" aria-label="Permalink to &quot;获取收藏表情&quot;">​</a></h2><p><strong>方法名</strong>： <code>fetch_custom_face</code></p><h4 id="该方法无参数" tabindex="-1">该方法无参数 <a class="header-anchor" href="#该方法无参数" aria-label="Permalink to &quot;该方法无参数&quot;">​</a></h4><p><strong>响应数据</strong></p><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>[RootElement]</td><td>List[string]</td><td>表情的下载URL</td></tr></tbody></table><h2 id="获取好友历史消息记录" tabindex="-1">获取好友历史消息记录 <a class="header-anchor" href="#获取好友历史消息记录" aria-label="Permalink to &quot;获取好友历史消息记录&quot;">​</a></h2><p><strong>方法名</strong>： <code>get_friend_msg_history</code></p><p><strong>参数</strong></p><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>user_id</code></td><td>uint32</td><td>好友ID</td></tr><tr><td><code>message_id</code></td><td>int32</td><td>要获取的消息的最后一条的ID</td></tr><tr><td><code>count</code></td><td>int32</td><td>获取的消息数量</td></tr></tbody></table><p><strong>响应数据</strong></p><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>messages</code></td><td>List[OneBotPrivateMessage]</td><td>获取的消息</td></tr></tbody></table><h2 id="获取群组历史消息记录" tabindex="-1">获取群组历史消息记录 <a class="header-anchor" href="#获取群组历史消息记录" aria-label="Permalink to &quot;获取群组历史消息记录&quot;">​</a></h2><p><strong>方法名</strong>： <code>get_group_msg_history</code></p><p><strong>参数</strong></p><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>group_id</code></td><td>uint32</td><td>群组ID</td></tr><tr><td><code>message_id</code></td><td>int32</td><td>要获取的消息的最后一条的ID</td></tr><tr><td><code>count</code></td><td>int32</td><td>获取的消息数量</td></tr></tbody></table><p><strong>响应数据</strong></p><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>messages</code></td><td>List[OneBotGroupMessage]</td><td>获取的消息</td></tr></tbody></table><h2 id="构造合并转发消息" tabindex="-1">构造合并转发消息 <a class="header-anchor" href="#构造合并转发消息" aria-label="Permalink to &quot;构造合并转发消息&quot;">​</a></h2><p><strong>方法名</strong>： <code>send_forward_msg</code></p><p><strong>参数</strong></p><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>messages</code></td><td>List[OneBotSegment.node]</td><td>参考下方</td></tr></tbody></table><p>其中<code>OneBotSegment.node</code>的<code>data</code>部分要求如下</p><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>自定义消息发送者昵称</td></tr><tr><td><code>uin</code></td><td>string</td><td>自定义消息发送者QQ号</td></tr><tr><td><code>content</code></td><td>List[OneBotSegment]</td><td>消息内容</td></tr></tbody></table><p><strong>响应数据</strong></p><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>resid</code></td><td>string</td><td>Resid</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><strong>发送合并转发消息</strong></p><p>请使用标准消息发送API发送一个<code>&quot;type&quot;: &quot;forward&quot;, &quot;id&quot;: Resid</code>的<code>OneBotSegment</code>消息</p><p><strong>参考代码</strong></p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-JyWF4" id="tab-gEsmTFf" checked="checked"><label for="tab-gEsmTFf">Nonebot OneBot V11</label></div><div class="blocks"><div class="language-python vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark has-highlighted-lines vp-code-dark"><code><span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> nonebot.adapters.onebot.v11 </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> MessageSegment</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test_send_forward_message</span><span style="color:#E1E4E8;">(target_id: </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    messages </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;type&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;node&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;data&quot;</span><span style="color:#E1E4E8;">: {</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;小助手&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;uin&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;2854196310&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;content&quot;</span><span style="color:#E1E4E8;">: [MessageSegment.text(</span><span style="color:#9ECBFF;">&quot;测试消息&quot;</span><span style="color:#E1E4E8;">)]},</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line highlighted"><span style="color:#E1E4E8;">    res_id </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.call_api(</span><span style="color:#9ECBFF;">&quot;send_forward_msg&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">messages</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">messages)</span></span>
<span class="line highlighted"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.send_group_msg(</span><span style="color:#FFAB70;">group_id</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">target_id, </span><span style="color:#FFAB70;">message</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">MessageSegment.forward(res_id))</span></span></code></pre><pre class="shiki github-light has-highlighted-lines vp-code-light"><code><span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> nonebot.adapters.onebot.v11 </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> MessageSegment</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">test_send_forward_message</span><span style="color:#24292E;">(target_id: </span><span style="color:#005CC5;">int</span><span style="color:#24292E;">):</span></span>
<span class="line"><span style="color:#24292E;">    messages </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;type&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;node&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;data&quot;</span><span style="color:#24292E;">: {</span><span style="color:#032F62;">&quot;name&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;小助手&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;uin&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;2854196310&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;content&quot;</span><span style="color:#24292E;">: [MessageSegment.text(</span><span style="color:#032F62;">&quot;测试消息&quot;</span><span style="color:#24292E;">)]},</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    ]</span></span>
<span class="line highlighted"><span style="color:#24292E;">    res_id </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.call_api(</span><span style="color:#032F62;">&quot;send_forward_msg&quot;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">messages</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">messages)</span></span>
<span class="line highlighted"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.send_group_msg(</span><span style="color:#E36209;">group_id</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">target_id, </span><span style="color:#E36209;">message</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">MessageSegment.forward(res_id))</span></span></code></pre></div></div></div></div>`,27),l=[e];function p(r,d,c,i,E,y){return t(),a("div",null,l)}const u=s(n,[["render",p]]);export{g as __pageData,u as default};
